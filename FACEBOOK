USE red_social;
go 
-- Tabla de usuarios
CREATE TABLE usuarios (
    id_usuario INT IDENTITY(1,1) PRIMARY KEY,
    nombre NVARCHAR(50),
    apellido NVARCHAR(50),
    correo NVARCHAR(100),
    contrase√±a NVARCHAR(255),
    foto_perfil NVARCHAR(255)
);
GO

-- Tabla de publicaciones
CREATE TABLE publicaciones (
    id_publicacion INT IDENTITY(1,1) PRIMARY KEY,
    id_usuario INT,
    contenido NVARCHAR(500),
    fecha_publicacion DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario)
);

GO
-- Crear vista para muro (muestra usuario + publicaciones)
CREATE VIEW vista_muro AS
SELECT 
    u.id_usuario,
    u.nombre,
    u.apellido,
    u.foto_perfil,
    p.id_publicacion,
    p.contenido,
    p.fecha_publicacion
FROM usuarios u
INNER JOIN publicaciones p ON u.id_usuario = p.id_usuario;
GO
SELECT * FROM vista_muro;

GO
-- Crear vista solo de publicaciones
CREATE VIEW vista_publicaciones AS
SELECT 
    p.id_publicacion,
    u.nombre + ' ' + u.apellido AS autor,
    p.contenido,
    p.fecha_publicacion
FROM publicaciones p
INNER JOIN usuarios u ON p.id_usuario = u.id_usuario;
GO
SELECT * FROM vista_publicaciones;
